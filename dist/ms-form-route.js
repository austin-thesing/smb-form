(()=>{var A=Object.defineProperty;var S=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var k=(t,e,n)=>e in t?A(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,I=(t,e)=>{for(var n in e||(e={}))L.call(e,n)&&k(t,n,e[n]);if(S)for(var n of S(e))D.call(e,n)&&k(t,n,e[n]);return t};var b=(t,e,n)=>new Promise((i,u)=>{var d=c=>{try{p(n.next(c))}catch(l){u(l)}},_=c=>{try{p(n.throw(c))}catch(l){u(l)}},p=c=>c.done?i(c.value):Promise.resolve(c.value).then(d,_);p((n=n.apply(t,e)).next())});document.addEventListener("DOMContentLoaded",()=>{let t=document.getElementById("wf-form-SMB"),e=document.getElementById("Are-you-an-ecommerce-seller"),n=document.getElementById("Funding-Amount"),i=document.getElementById("Revenue-per-month"),u=document.getElementById("Use-of-funds"),d=e.closest('[data-form="step"]').querySelector('[data-form="next-btn"]');if(!t||!e||!n||!i||!u||!d){console.error("One or more required form elements not found.");return}function _(c){let l=c.value.replace(/[\$,]/g,""),o=parseInt(l,10);return!isNaN(o)&&o>0?o:null}function p(c){let l=c.value;return{Inventory:"inventory",Marketing:"marketing","Other Business Expense":"other"}[l]||null}d.addEventListener("click",c=>{if(e.value==="Yes"){c.preventDefault();let l=_(n),o=_(i),s=p(u),r=new URLSearchParams;r.append("marketing_survey_upsert_survey_form[online_merchant]","true"),l!==null&&r.append("marketing_survey_upsert_survey_form[funding_amount]",l),o!==null&&r.append("marketing_survey_upsert_survey_form[average_monthly_sales]",o),s!==null&&r.append("marketing_survey_upsert_survey_form[funding_reason]",s);let a=`https://app.onrampfunds.com/smb-signup?${r.toString()}`;console.log("Redirecting to:",a),window.location.href=a}})});(function(t,e,n,i){if(!t.getElementById(n)){var u=t.createElement(e),d=t.getElementsByTagName(e)[0];u.id=n,u.src="//js.hs-analytics.net/analytics/"+Math.ceil(new Date/i)*i+"/19654160.js",u.onload=function(){window._hsq&&(window._hsq.push(["setPath",window.location.pathname]),window._hsq.push(["trackPageView"]))},d.parentNode.insertBefore(u,d)}})(document,"script","hs-analytics",3e5);function N(){let t={},e=new URLSearchParams(window.location.search);for(let[n,i]of e)t[n]=i;return t}function R(){let t=N();["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].forEach(n=>{if(t[n]){let i=document.querySelector(`input[name="${n}"]`);if(!i){i=document.createElement("input"),i.type="hidden",i.name=n;let u=document.getElementById("wf-form-SMB");u&&u.appendChild(i)}i.value=t[n]}})}window.addEventListener("load",function(){window._hsq&&(window._hsq.push(["setPath",window.location.pathname]),window._hsq.push(["trackPageView"])),R()});function $(){let t=document.createElement("script");t.src="https://js.hsforms.net/forms/embed/19654160.js",t.defer=!0,document.head.appendChild(t)}function E(t){let e=t.value.replace(/\D/g,"");if(e===""){t.value="";return}let n=parseInt(e);if(isNaN(n)){t.value="";return}e=n.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),e=e.replace(/^\$/,""),t.value="$"+e}function M(t){let e=t.value.replace(/\D/g,"");if(e.length>=2){let n=parseInt(e.slice(0,2));n===0&&(n=1),n>12&&(n=12),e=n.toString().padStart(2,"0")+e.slice(2)}e.length>2&&(e=e.slice(0,2)+"/"+e.slice(2)),e.length>5&&(e=e.slice(0,5)),t.value=e}var U=document.querySelectorAll('input[data-type="dollar"]');U.forEach(t=>{t.addEventListener("input",function(){this.value.trim()!==""&&E(this)})});var q=document.getElementById("Funding-Amount");q&&q.addEventListener("input",function(){this.value.trim()!==""&&E(this)});var F=document.getElementById("Revenue-per-month");F&&F.addEventListener("input",function(){this.value.trim()!==""&&E(this)});var B=document.getElementById("When-did-you-start-your-business");B&&B.addEventListener("input",function(){M(this)});document.addEventListener("DOMContentLoaded",function(){$();let t=document.getElementById("wf-form-SMB");if(!t){console.error("Form element not found! Check if the form ID is correct.");return}new IntersectionObserver(o=>{o.forEach(s=>{s.isIntersecting&&window._hsq&&!window._formViewTracked&&(window._hsq.push(["trackEvent",{id:"form_view"}]),window._formViewTracked=!0,window._hsq.push(["trackForms",{formId:"e387a024-a165-4d47-956c-23e0e1f6b7eb",formInstanceId:t.getAttribute("data-form-instance-id")||"1"}]))})}).observe(t);let n="19654160",i="e387a024-a165-4d47-956c-23e0e1f6b7eb";function u(){var o;return((o=document.cookie.split("; ").find(s=>s.startsWith("hubspotutk=")))==null?void 0:o.split("=")[1])||""}function d(){return{pageUri:window.location.href,pageName:document.title}}function _(o){let r=`; ${document.cookie}`.split(`; ${o}=`);if(r.length===2){let a=r.pop().split(";").shift();try{return JSON.parse(decodeURIComponent(a))}catch(w){return a}}return null}function p(o){return b(this,null,function*(){let s=`https://api.hsforms.com/submissions/v3/integration/submit/${n}/${i}`,r=c(o);try{window._hsq&&!window._formStartTracked&&(window._hsq.push(["trackEvent",{id:"form_start"}]),window._formStartTracked=!0);let a=yield fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),w=yield a.json();if(!a.ok)throw console.error("HubSpot Error Details:"),console.error("Status:",a.status),console.error("Response Data:",w),console.error("Fields Sent:",r.fields.map(g=>`${g.name}: ${g.value}`)),window._hsq&&window._hsq.push(["trackEvent",{id:"form_submission_error",value:a.status}]),new Error(`HubSpot submission failed: ${w.message||"Unknown error"}`);return window._hsq&&(window._hsq.push(["trackFormSubmission",i,{formVariant:"A",formInstanceId:t.getAttribute("data-form-instance-id")||"1"}]),window._hsq.push(["trackEvent",{id:"form_submission_success"}]),window._hsq.push(["identify",{email:o.get("Email"),firstname:o.get("First-Name"),lastname:o.get("Last-Name")}])),w}catch(a){throw console.error("Error submitting to HubSpot:",a),a}})}function c(o){let s=[],r=I({hutk:u()},d());console.log("Raw form data for ecommerce seller:",o.get("Are-you-an-ecommerce-seller"));let a=m=>m&&m.replace(/[$,]/g,"").trim();["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].forEach(m=>{let h=o.get(m);h&&s.push({name:m,value:h.trim()})});let g={"First-Name":"firstname","Last-Name":"lastname",Email:"email",Phone:"phone","Registered-Business-Name":"business_name",Industry:"industry__dropdown_","Funding-Amount":"user_reported_desired_amount","Revenue-per-month":"user_reported_monthly_revenue","Use-of-funds":"use_of_funds","Timeline-For-Loan":"when_do_you_need_the_loan_","When-did-you-start-your-business":"year_founded","Are-you-an-ecommerce-seller":"ecommerce_seller","Do-you-have-a-business-bank-account":"business_bank_account"};for(let[m,h]of Object.entries(g)){let f=o.get(m);if(m==="Are-you-an-ecommerce-seller"&&console.log("Ecommerce seller field mapping:",{webflowField:m,hubspotField:h,value:f}),m==="Industry"){let y=document.getElementById("Industry");y&&y.value&&(f=y.value)}f&&f.trim()!==""&&((m==="Funding-Amount"||m==="Revenue-per-month")&&(f=a(f)),h==="industry__dropdown_"?s.push({name:"industry__dropdown_",value:f.trim()}):s.push({name:h,value:f.trim()}))}let v=document.querySelector(".is-custom-select");return v&&v.value&&v.value!=="Business state*"&&s.push({name:"contact_state",value:v.value.trim()}),console.log("Final HubSpot submission fields:",{allFields:s,ecommerceField:s.find(m=>m.name==="ecommerce_seller")}),{fields:s,context:r}}let l=document.querySelector("#submit");if(l){let o=s=>{window._hsq&&window._hsq.push(["trackEvent",{id:"form_step_complete",value:s}])};document.querySelectorAll('[data-form="next-btn"]').forEach((s,r)=>{s.addEventListener("click",()=>{o(r+1)})}),l.addEventListener("click",function(s){return b(this,null,function*(){try{let r=new FormData(t);window._hsq&&window._hsq.push(["trackEvent",{id:"form_submit_attempt"}]);let a=yield p(r);window._hsq&&(window._hsq.push(["trackFormSubmission",i,{formVariant:"A",formInstanceId:t.getAttribute("data-form-instance-id")||"1"}]),window._hsq.push(["trackEvent",{id:"form_submission_success"}]),window._hsq.push(["identify",{email:r.get("Email"),firstname:r.get("First-Name"),lastname:r.get("Last-Name")}]))}catch(r){console.error("HubSpot submission failed:",r);let a=document.querySelector(".w-form-fail");a&&(a.style.display="block"),window._hsq&&window._hsq.push(["trackEvent",{id:"form_submission_error",value:r.message}])}})})}else console.error("Formly submit button not found! Check if the button ID is correct.")});})();
//# sourceMappingURL=ms-form-route.js.map
