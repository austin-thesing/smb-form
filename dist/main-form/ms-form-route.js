(()=>{var F=Object.defineProperty;var S=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var k=(t,e,n)=>e in t?F(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,I=(t,e)=>{for(var n in e||(e={}))U.call(e,n)&&k(t,n,e[n]);if(S)for(var n of S(e))A.call(e,n)&&k(t,n,e[n]);return t};var E=(t,e,n)=>new Promise((a,u)=>{var f=d=>{try{p(n.next(d))}catch(c){u(c)}},l=d=>{try{p(n.throw(d))}catch(c){u(c)}},p=d=>d.done?a(d.value):Promise.resolve(d.value).then(f,l);p((n=n.apply(t,e)).next())});document.addEventListener("DOMContentLoaded",()=>{let t=document.getElementById("wf-form-main-hero-form"),e=document.getElementById("Are-you-an-ecommerce-seller"),n=document.getElementById("Funding-Amount"),a=document.getElementById("Revenue-per-month"),u=document.getElementById("Use-of-funds"),f=e.closest('[data-form="step"]').querySelector('[data-form="next-btn"]'),l=[];if(t||l.push("wf-form-main-hero-form"),e||l.push("Are-you-an-ecommerce-seller"),n||l.push("Funding-Amount"),a||l.push("Revenue-per-month"),u||l.push("Use-of-funds"),f||l.push("next-btn in ecommerce step"),l.length){console.error("Missing required form elements:",l.join(", "));return}function p(c){let s=c.value.replace(/[\$,]/g,"");console.log(`[DEBUG] Cleaning dollar value for ${c.id}: raw=${c.value}, cleaned=${s}`);let o=parseInt(s,10);return console.log(`[DEBUG] Parsed number for ${c.id}:`,o),!isNaN(o)&&o>0?o:null}function d(c){let s=c.value;console.log(`[DEBUG] Selected funding reason: ${s}`);let r={Inventory:"inventory",Marketing:"marketing","Other Business Expense":"other"}[s]||null;return console.log(`[DEBUG] Mapped funding reason: ${r}`),r}f.addEventListener("click",c=>{if(console.log(`[DEBUG] Next button clicked, ecommerce value: ${e.value}`),e.value==="Yes"){c.preventDefault();let s=p(n),o=p(a),r=d(u);console.log("[DEBUG] Funding Amount:",s),console.log("[DEBUG] Avg Monthly Sales:",o),console.log("[DEBUG] Funding Reason:",r);let i=new URLSearchParams;i.append("marketing_survey_upsert_survey_form[online_merchant]","true"),s!==null&&i.append("marketing_survey_upsert_survey_form[funding_amount]",s),o!==null&&i.append("marketing_survey_upsert_survey_form[average_monthly_sales]",o),r!==null&&i.append("marketing_survey_upsert_survey_form[funding_reason]",r);let h=`https://app.onrampfunds.com/signup?${i.toString()}`;console.log("[DEBUG] Redirecting to:",h),window.location.href=h}})});(function(t,e,n,a){if(!t.getElementById(n)){var u=t.createElement(e),f=t.getElementsByTagName(e)[0];u.id=n,u.src="//js.hs-analytics.net/analytics/"+Math.ceil(new Date/a)*a+"/19654160.js",u.onload=function(){window._hsq&&(window._hsq.push(["setPath",window.location.pathname]),window._hsq.push(["trackPageView"]))},f.parentNode.insertBefore(u,f)}})(document,"script","hs-analytics",3e5);function $(){let t={},e=new URLSearchParams(window.location.search);for(let[n,a]of e)t[n]=a;return t}function L(){let t=$();["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].forEach(n=>{if(t[n]){let a=document.querySelector(`input[name="${n}"]`);if(!a){a=document.createElement("input"),a.type="hidden",a.name=n;let u=document.getElementById("wf-form-main-hero-form");u&&u.appendChild(a)}a.value=t[n]}})}window.addEventListener("load",function(){window._hsq&&(window._hsq.push(["setPath",window.location.pathname]),window._hsq.push(["trackPageView"])),L()});function G(){let t=document.createElement("script");t.src="https://js.hsforms.net/forms/embed/19654160.js",t.defer=!0,document.head.appendChild(t)}function b(t){let e=t.value.replace(/\D/g,"");if(e===""){t.value="";return}let n=parseInt(e);if(isNaN(n)){t.value="";return}e=n.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),e=e.replace(/^\$/,""),t.value="$"+e}function N(t){let e=t.value.replace(/\D/g,"");if(e.length>=2){let n=parseInt(e.slice(0,2));n===0&&(n=1),n>12&&(n=12),e=n.toString().padStart(2,"0")+e.slice(2)}e.length>2&&(e=e.slice(0,2)+"/"+e.slice(2)),e.length>5&&(e=e.slice(0,5)),t.value=e}var R=document.querySelectorAll('input[data-type="dollar"]');R.forEach(t=>{t.addEventListener("input",function(){this.value.trim()!==""&&b(this)})});var B=document.getElementById("Funding-Amount");B&&B.addEventListener("input",function(){this.value.trim()!==""&&b(this)});var D=document.getElementById("Revenue-per-month");D&&D.addEventListener("input",function(){this.value.trim()!==""&&b(this)});var q=document.getElementById("When-did-you-start-your-business");q&&q.addEventListener("input",function(){N(this)});document.addEventListener("DOMContentLoaded",function(){G();let t=document.getElementById("wf-form-main-hero-form");if(!t){console.error("Form element not found! Check if the form ID is correct.");return}new IntersectionObserver(s=>{s.forEach(o=>{o.isIntersecting&&window._hsq&&!window._formViewTracked&&(window._hsq.push(["trackEvent",{id:"form_view"}]),window._formViewTracked=!0,window._hsq.push(["trackForms",{formId:"44b5a828-468f-4814-a71e-04ab7d1fd89a",formInstanceId:t.getAttribute("data-form-instance-id")||"1"}]))})}).observe(t);let n="19654160",a="44b5a828-468f-4814-a71e-04ab7d1fd89a";function u(){var s;return((s=document.cookie.split("; ").find(o=>o.startsWith("hubspotutk=")))==null?void 0:s.split("=")[1])||""}function f(){return{pageUri:window.location.href,pageName:document.title}}function l(s){let r=`; ${document.cookie}`.split(`; ${s}=`);if(r.length===2){let i=r.pop().split(";").shift();try{return JSON.parse(decodeURIComponent(i))}catch(h){return i}}return null}function p(s){return E(this,null,function*(){let o=`https://api.hsforms.com/submissions/v3/integration/submit/${n}/${a}`,r=d(s);try{window._hsq&&!window._formStartTracked&&(window._hsq.push(["trackEvent",{id:"form_start"}]),window._formStartTracked=!0);let i=yield fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),h=yield i.json();if(!i.ok)throw console.error("HubSpot Error Details:"),console.error("Status:",i.status),console.error("Response Data:",h),console.error("Fields Sent:",r.fields.map(w=>`${w.name}: ${w.value}`)),window._hsq&&window._hsq.push(["trackEvent",{id:"form_submission_error",value:i.status}]),new Error(`HubSpot submission failed: ${h.message||"Unknown error"}`);return window._hsq&&(window._hsq.push(["trackFormSubmission",a,{formVariant:"A",formInstanceId:t.getAttribute("data-form-instance-id")||"1"}]),window._hsq.push(["trackEvent",{id:"form_submission_success"}]),window._hsq.push(["identify",{email:s.get("Email"),firstname:s.get("First-Name"),lastname:s.get("Last-Name")}])),h}catch(i){throw console.error("Error submitting to HubSpot:",i),i}})}function d(s){let o=[],r=I({hutk:u()},f());console.log("Raw form data for ecommerce seller:",s.get("Are-you-an-ecommerce-seller"));let i=m=>m&&m.replace(/[$,]/g,"").trim();["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].forEach(m=>{let _=s.get(m);_&&o.push({name:m,value:_.trim()})});let w={"First-Name":"firstname","Last-Name":"lastname",Email:"email",Phone:"phone","Registered-Business-Name":"business_name",Industry:"industry__dropdown_","Funding-Amount":"user_reported_desired_amount","Revenue-Per-Month":"user_reported_monthly_revenue","Use-Of-Funds":"use_of_funds","Timeline-For-Loan":"when_do_you_need_the_loan_","When-Did-You-Start-Your-Business":"year_founded","Are-you-an-ecommerce-seller":"ecommerce_seller","Do-you-have-a-business-bank-account":"business_bank_account"};for(let[m,_]of Object.entries(w)){let g=s.get(m);if(m==="Are-you-an-ecommerce-seller"&&console.log("Ecommerce seller field mapping:",{webflowField:m,hubspotField:_,value:g}),m==="Industry"){let y=document.getElementById("Industry");y&&y.value&&(g=y.value)}g&&g.trim()!==""&&((m==="Funding-Amount"||m==="Revenue-Per-Month")&&(g=i(g)),_==="industry__dropdown_"?o.push({name:"industry__dropdown_",value:g.trim()}):o.push({name:_,value:g.trim()}))}let v=document.querySelector(".is-custom-select");return v&&v.value&&v.value!=="Business state*"&&o.push({name:"contact_state",value:v.value.trim()}),console.log("Final HubSpot submission fields:",{allFields:o,ecommerceField:o.find(m=>m.name==="ecommerce_seller")}),{fields:o,context:r}}let c=document.querySelector("#submit");if(c){let s=o=>{window._hsq&&window._hsq.push(["trackEvent",{id:"form_step_complete",value:o}])};document.querySelectorAll('[data-form="next-btn"]').forEach((o,r)=>{o.addEventListener("click",()=>{s(r+1)})}),c.addEventListener("click",function(o){return E(this,null,function*(){try{let r=new FormData(t);window._hsq&&window._hsq.push(["trackEvent",{id:"form_submit_attempt"}]);let i=yield p(r);window._hsq&&(window._hsq.push(["trackFormSubmission",a,{formVariant:"A",formInstanceId:t.getAttribute("data-form-instance-id")||"1"}]),window._hsq.push(["trackEvent",{id:"form_submission_success"}]),window._hsq.push(["identify",{email:r.get("Email"),firstname:r.get("First-Name"),lastname:r.get("Last-Name")}]))}catch(r){console.error("HubSpot submission failed:",r);let i=document.querySelector(".w-form-fail");i&&(i.style.display="block"),window._hsq&&window._hsq.push(["trackEvent",{id:"form_submission_error",value:r.message}])}})})}else console.error("Formly submit button not found! Check if the button ID is correct.")});})();
//# sourceMappingURL=ms-form-route.js.map
