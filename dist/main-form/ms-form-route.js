(()=>{var F=Object.defineProperty;var S=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var k=(e,t,n)=>t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,I=(e,t)=>{for(var n in t||(t={}))U.call(t,n)&&k(e,n,t[n]);if(S)for(var n of S(t))A.call(t,n)&&k(e,n,t[n]);return e};var E=(e,t,n)=>new Promise((i,m)=>{var d=a=>{try{p(n.next(a))}catch(c){m(c)}},g=a=>{try{p(n.throw(a))}catch(c){m(c)}},p=a=>a.done?i(a.value):Promise.resolve(a.value).then(d,g);p((n=n.apply(e,t)).next())});document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("wf-form-main-hero-form"),t=document.getElementById("Are-you-an-ecommerce-seller"),n=document.getElementById("Funding-Amount"),i=document.getElementById("Revenue-per-month"),m=document.getElementById("Use-of-funds"),d=[];if(e||d.push("wf-form-main-hero-form"),t||d.push("Are-you-an-ecommerce-seller"),n||d.push("Funding-Amount"),i||d.push("Revenue-per-month"),m||d.push("Use-of-funds"),d.length){console.error("Missing required form elements:",d.join(", "));return}function g(a){let c=a.value.replace(/[\$,]/g,"");console.log(`[DEBUG] Cleaning dollar value for ${a.id}: raw=${a.value}, cleaned=${c}`);let o=parseInt(c,10);return console.log(`[DEBUG] Parsed number for ${a.id}:`,o),!isNaN(o)&&o>0?o:null}function p(a){let c=a.value;console.log(`[DEBUG] Selected funding reason: ${c}`);let s={Inventory:"inventory",Marketing:"marketing","Other Business Expense":"other"}[c]||null;return console.log(`[DEBUG] Mapped funding reason: ${s}`),s}t.addEventListener("change",a=>{if(console.log(`[DEBUG] Ecommerce seller changed: ${a.target.value}`),a.target.value==="Yes"){let c=g(n),o=g(i),s=p(m);console.log("[DEBUG] Funding Amount:",c),console.log("[DEBUG] Avg Monthly Sales:",o),console.log("[DEBUG] Funding Reason:",s);let r=new URLSearchParams;r.append("marketing_survey_upsert_survey_form[online_merchant]","true"),c!==null&&r.append("marketing_survey_upsert_survey_form[funding_amount]",c),o!==null&&r.append("marketing_survey_upsert_survey_form[average_monthly_sales]",o),s!==null&&r.append("marketing_survey_upsert_survey_form[funding_reason]",s);let u=`https://app.onrampfunds.com/signup?${r.toString()}`;console.log("[DEBUG] Redirecting to:",u),window.location.href=u}})});(function(e,t,n,i){if(!e.getElementById(n)){var m=e.createElement(t),d=e.getElementsByTagName(t)[0];m.id=n,m.src="//js.hs-analytics.net/analytics/"+Math.ceil(new Date/i)*i+"/19654160.js",m.onload=function(){window._hsq&&(window._hsq.push(["setPath",window.location.pathname]),window._hsq.push(["trackPageView"]))},d.parentNode.insertBefore(m,d)}})(document,"script","hs-analytics",3e5);function $(){let e={},t=new URLSearchParams(window.location.search);for(let[n,i]of t)e[n]=i;return e}function L(){let e=$();["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].forEach(n=>{if(e[n]){let i=document.querySelector(`input[name="${n}"]`);if(!i){i=document.createElement("input"),i.type="hidden",i.name=n;let m=document.getElementById("wf-form-main-hero-form");m&&m.appendChild(i)}i.value=e[n]}})}window.addEventListener("load",function(){window._hsq&&(window._hsq.push(["setPath",window.location.pathname]),window._hsq.push(["trackPageView"])),L()});function G(){let e=document.createElement("script");e.src="https://js.hsforms.net/forms/embed/19654160.js",e.defer=!0,document.head.appendChild(e)}function b(e){let t=e.value.replace(/\D/g,"");if(t===""){e.value="";return}let n=parseInt(t);if(isNaN(n)){e.value="";return}t=n.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),t=t.replace(/^\$/,""),e.value="$"+t}function N(e){let t=e.value.replace(/\D/g,"");if(t.length>=2){let n=parseInt(t.slice(0,2));n===0&&(n=1),n>12&&(n=12),t=n.toString().padStart(2,"0")+t.slice(2)}t.length>2&&(t=t.slice(0,2)+"/"+t.slice(2)),t.length>5&&(t=t.slice(0,5)),e.value=t}var R=document.querySelectorAll('input[data-type="dollar"]');R.forEach(e=>{e.addEventListener("input",function(){this.value.trim()!==""&&b(this)})});var B=document.getElementById("Funding-Amount");B&&B.addEventListener("input",function(){this.value.trim()!==""&&b(this)});var D=document.getElementById("Revenue-per-month");D&&D.addEventListener("input",function(){this.value.trim()!==""&&b(this)});var q=document.getElementById("When-did-you-start-your-business");q&&q.addEventListener("input",function(){N(this)});document.addEventListener("DOMContentLoaded",function(){G();let e=document.getElementById("wf-form-main-hero-form");if(!e){console.error("Form element not found! Check if the form ID is correct.");return}new IntersectionObserver(o=>{o.forEach(s=>{s.isIntersecting&&window._hsq&&!window._formViewTracked&&(window._hsq.push(["trackEvent",{id:"form_view"}]),window._formViewTracked=!0,window._hsq.push(["trackForms",{formId:"44b5a828-468f-4814-a71e-04ab7d1fd89a",formInstanceId:e.getAttribute("data-form-instance-id")||"1"}]))})}).observe(e);let n="19654160",i="44b5a828-468f-4814-a71e-04ab7d1fd89a";function m(){var o;return((o=document.cookie.split("; ").find(s=>s.startsWith("hubspotutk=")))==null?void 0:o.split("=")[1])||""}function d(){return{pageUri:window.location.href,pageName:document.title}}function g(o){let r=`; ${document.cookie}`.split(`; ${o}=`);if(r.length===2){let u=r.pop().split(";").shift();try{return JSON.parse(decodeURIComponent(u))}catch(_){return u}}return null}function p(o){return E(this,null,function*(){let s=`https://api.hsforms.com/submissions/v3/integration/submit/${n}/${i}`,r=a(o);try{window._hsq&&!window._formStartTracked&&(window._hsq.push(["trackEvent",{id:"form_start"}]),window._formStartTracked=!0);let u=yield fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),_=yield u.json();if(!u.ok)throw console.error("HubSpot Error Details:"),console.error("Status:",u.status),console.error("Response Data:",_),console.error("Fields Sent:",r.fields.map(w=>`${w.name}: ${w.value}`)),window._hsq&&window._hsq.push(["trackEvent",{id:"form_submission_error",value:u.status}]),new Error(`HubSpot submission failed: ${_.message||"Unknown error"}`);return window._hsq&&(window._hsq.push(["trackFormSubmission",i,{formVariant:"A",formInstanceId:e.getAttribute("data-form-instance-id")||"1"}]),window._hsq.push(["trackEvent",{id:"form_submission_success"}]),window._hsq.push(["identify",{email:o.get("Email"),firstname:o.get("First-Name"),lastname:o.get("Last-Name")}])),_}catch(u){throw console.error("Error submitting to HubSpot:",u),u}})}function a(o){let s=[],r=I({hutk:m()},d());console.log("Raw form data for ecommerce seller:",o.get("Are-you-an-ecommerce-seller"));let u=l=>l&&l.replace(/[$,]/g,"").trim();["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].forEach(l=>{let h=o.get(l);h&&s.push({name:l,value:h.trim()})});let w={"First-Name":"firstname","Last-Name":"lastname",Email:"email",Phone:"phone","Registered-Business-Name":"business_name",Industry:"industry__dropdown_","Funding-Amount":"user_reported_desired_amount","Revenue-Per-Month":"user_reported_monthly_revenue","Use-Of-Funds":"use_of_funds","Timeline-For-Loan":"when_do_you_need_the_loan_","When-Did-You-Start-Your-Business":"year_founded","Are-you-an-ecommerce-seller":"ecommerce_seller","Do-you-have-a-business-bank-account":"business_bank_account"};for(let[l,h]of Object.entries(w)){let f=o.get(l);if(l==="Are-you-an-ecommerce-seller"&&console.log("Ecommerce seller field mapping:",{webflowField:l,hubspotField:h,value:f}),l==="Industry"){let y=document.getElementById("Industry");y&&y.value&&(f=y.value)}f&&f.trim()!==""&&((l==="Funding-Amount"||l==="Revenue-per-month")&&(f=u(f)),h==="industry__dropdown_"?s.push({name:"industry__dropdown_",value:f.trim()}):s.push({name:h,value:f.trim()}))}let v=document.querySelector(".is-custom-select");return v&&v.value&&v.value!=="Business state*"&&s.push({name:"contact_state",value:v.value.trim()}),console.log("Final HubSpot submission fields:",{allFields:s,ecommerceField:s.find(l=>l.name==="ecommerce_seller")}),{fields:s,context:r}}let c=document.querySelector("#submit");if(c){let o=s=>{window._hsq&&window._hsq.push(["trackEvent",{id:"form_step_complete",value:s}])};document.querySelectorAll('[data-form="next-btn"]').forEach((s,r)=>{s.addEventListener("click",()=>{o(r+1)})}),c.addEventListener("click",function(s){return E(this,null,function*(){try{let r=new FormData(e);window._hsq&&window._hsq.push(["trackEvent",{id:"form_submit_attempt"}]);let u=yield p(r);window._hsq&&(window._hsq.push(["trackFormSubmission",i,{formVariant:"A",formInstanceId:e.getAttribute("data-form-instance-id")||"1"}]),window._hsq.push(["trackEvent",{id:"form_submission_success"}]),window._hsq.push(["identify",{email:r.get("Email"),firstname:r.get("First-Name"),lastname:r.get("Last-Name")}]))}catch(r){console.error("HubSpot submission failed:",r);let u=document.querySelector(".w-form-fail");u&&(u.style.display="block"),window._hsq&&window._hsq.push(["trackEvent",{id:"form_submission_error",value:r.message}])}})})}else console.error("Formly submit button not found! Check if the button ID is correct.")});})();
//# sourceMappingURL=ms-form-route.js.map
