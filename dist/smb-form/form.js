(()=>{var D=Object.defineProperty;var k=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var F=(e,t,n)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,q=(e,t)=>{for(var n in t||(t={}))R.call(t,n)&&F(e,n,t[n]);if(k)for(var n of k(t))$.call(t,n)&&F(e,n,t[n]);return e};var I=(e,t,n)=>new Promise((r,c)=>{var f=a=>{try{d(n.next(a))}catch(l){c(l)}},w=a=>{try{d(n.throw(a))}catch(l){c(l)}},d=a=>a.done?r(a.value):Promise.resolve(a.value).then(f,w);d((n=n.apply(e,t)).next())});var y={webflowFormId:"wf-form-SMB",hubspotFormId:"e387a024-a165-4d47-956c-23e0e1f6b7eb",redirectBaseUrl:"https://app.onrampfunds.com/smb-signup"};var A=y;document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById(A.webflowFormId),t=document.getElementById("Are-you-an-ecommerce-seller"),n=document.getElementById("Funding-Amount"),r=document.getElementById("Revenue-per-month"),c=document.getElementById("Use-of-funds");if(!e||!t||!n||!r||!c){console.error("One or more required form elements not found.");return}function f(d){let a=d.value.replace(/[\$,]/g,""),l=parseInt(a,10);return!isNaN(l)&&l>0?l:null}function w(d){let a=d.value;return{Inventory:"inventory",Marketing:"marketing","Other Business Expense":"other"}[a]||null}t.addEventListener("change",d=>{if(d.target.value==="Yes"){let a=f(n),l=f(r),s=w(c),o=new URLSearchParams;o.append("marketing_survey_upsert_survey_form[online_merchant]","true"),a!==null&&o.append("marketing_survey_upsert_survey_form[funding_amount]",a),l!==null&&o.append("marketing_survey_upsert_survey_form[average_monthly_sales]",l),s!==null&&o.append("marketing_survey_upsert_survey_form[funding_reason]",s);let i=`${A.redirectBaseUrl}?${o.toString()}`;console.log("Redirecting to:",i),window.location.href=i}})});var b=y;(function(e,t,n,r){if(!e.getElementById(n)){var c=e.createElement(t),f=e.getElementsByTagName(t)[0];c.id=n,c.src="//js.hs-analytics.net/analytics/"+Math.ceil(new Date/r)*r+"/19654160.js",c.onload=function(){window._hsq&&(window._hsq.push(["setPath",window.location.pathname]),window._hsq.push(["trackPageView"]))},f.parentNode.insertBefore(c,f)}})(document,"script","hs-analytics",3e5);function C(){let e={},t=new URLSearchParams(window.location.search);for(let[n,r]of t)e[n]=r;return e}function O(){let e=C();["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].forEach(n=>{if(e[n]){let r=document.querySelector(`input[name="${n}"]`);if(!r){r=document.createElement("input"),r.type="hidden",r.name=n;let c=document.getElementById(b.webflowFormId);c&&c.appendChild(r)}r.value=e[n]}})}window.addEventListener("load",function(){window._hsq&&(window._hsq.push(["setPath",window.location.pathname]),window._hsq.push(["trackPageView"])),O()});function P(){let e=document.createElement("script");e.src="https://js.hsforms.net/forms/embed/19654160.js",e.defer=!0,document.head.appendChild(e)}function S(e){let t=e.value.replace(/\D/g,"");if(t===""){e.value="";return}let n=parseInt(t);if(isNaN(n)){e.value="";return}t=n.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),t=t.replace(/^\$/,""),e.value="$"+t}function V(e){let t=e.value.replace(/\D/g,"");if(t.length>=2){let n=parseInt(t.slice(0,2));n===0&&(n=1),n>12&&(n=12),t=n.toString().padStart(2,"0")+t.slice(2)}t.length>2&&(t=t.slice(0,2)+"/"+t.slice(2)),t.length>5&&(t=t.slice(0,5)),e.value=t}var M=document.querySelectorAll('input[data-type="dollar"]');M.forEach(e=>{e.addEventListener("input",function(){this.value.trim()!==""&&S(this)})});var B=document.getElementById("Funding-Amount");B&&B.addEventListener("input",function(){this.value.trim()!==""&&S(this)});var L=document.getElementById("Revenue-per-month");L&&L.addEventListener("input",function(){this.value.trim()!==""&&S(this)});var N=document.getElementById("When-did-you-start-your-business");N&&N.addEventListener("input",function(){V(this)});document.addEventListener("DOMContentLoaded",function(){P();let e=document.getElementById(b.webflowFormId);if(!e){console.error("Form element not found! Check if the form ID is correct.");return}new IntersectionObserver(s=>{s.forEach(o=>{o.isIntersecting&&window._hsq&&!window._formViewTracked&&(window._hsq.push(["trackEvent",{id:"form_view"}]),window._formViewTracked=!0,window._hsq.push(["trackForms",{formId:b.hubspotFormId,formInstanceId:e.getAttribute("data-form-instance-id")||"1"}]))})}).observe(e);let n="19654160",r=b.hubspotFormId;function c(){var s;return((s=document.cookie.split("; ").find(o=>o.startsWith("hubspotutk=")))==null?void 0:s.split("=")[1])||""}function f(){return{pageUri:window.location.href,pageName:document.title}}function w(s){let i=`; ${document.cookie}`.split(`; ${s}=`);if(i.length===2){let u=i.pop().split(";").shift();try{return JSON.parse(decodeURIComponent(u))}catch(_){return u}}return null}function d(s){return I(this,null,function*(){let o=`https://api.hsforms.com/submissions/v3/integration/submit/${n}/${r}`,i=a(s);try{window._hsq&&!window._formStartTracked&&(window._hsq.push(["trackEvent",{id:"form_start"}]),window._formStartTracked=!0);let u=yield fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),_=yield u.json();if(!u.ok)throw console.error("HubSpot Error Details:"),console.error("Status:",u.status),console.error("Response Data:",_),console.error("Fields Sent:",i.fields.map(g=>`${g.name}: ${g.value}`)),window._hsq&&window._hsq.push(["trackEvent",{id:"form_submission_error",value:u.status}]),new Error(`HubSpot submission failed: ${_.message||"Unknown error"}`);return window._hsq&&(window._hsq.push(["trackFormSubmission",r,{formVariant:"A",formInstanceId:e.getAttribute("data-form-instance-id")||"1"}]),window._hsq.push(["trackEvent",{id:"form_submission_success"}]),window._hsq.push(["identify",{email:s.get("Email"),firstname:s.get("First-Name"),lastname:s.get("Last-Name")}])),_}catch(u){throw console.error("Error submitting to HubSpot:",u),u}})}function a(s){let o=[],i=q({hutk:c()},f());console.log("Raw form data for ecommerce seller:",s.get("Are-you-an-ecommerce-seller"));let u=m=>m&&m.replace(/[$,]/g,"").trim();["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].forEach(m=>{let h=s.get(m);h&&o.push({name:m,value:h.trim()})});let g={"First-Name":"firstname","Last-Name":"lastname",Email:"email",Phone:"phone","Registered-Business-Name":"business_name",Industry:"industry__dropdown_","Funding-Amount":"user_reported_desired_amount","Revenue-per-month":"user_reported_monthly_revenue","Use-of-funds":"use_of_funds","Timeline-For-Loan":"when_do_you_need_the_loan_","When-did-you-start-your-business":"year_founded","Are-You-An-Ecommerce-Seller":"ecommerce_seller","Do-you-have-a-business-bank-account":"business_bank_account"};for(let[m,h]of Object.entries(g)){let p=s.get(m);if(m==="Are-you-an-ecommerce-seller"&&console.log("Ecommerce seller field mapping:",{webflowField:m,hubspotField:h,value:p}),m==="Industry"){let E=document.getElementById("Industry");E&&E.value&&(p=E.value)}p&&p.trim()!==""&&((m==="Funding-Amount"||m==="Revenue-per-month")&&(p=u(p)),h==="industry__dropdown_"?o.push({name:"industry__dropdown_",value:p.trim()}):o.push({name:h,value:p.trim()}))}let v=document.querySelector(".is-custom-select");return v&&v.value&&v.value!=="Business state*"&&o.push({name:"contact_state",value:v.value.trim()}),console.log("Final HubSpot submission fields:",{allFields:o,ecommerceField:o.find(m=>m.name==="ecommerce_seller")}),{fields:o,context:i}}let l=document.querySelector("#submit");if(l){let s=o=>{window._hsq&&window._hsq.push(["trackEvent",{id:"form_step_complete",value:o}])};document.querySelectorAll('[data-form="next-btn"]').forEach((o,i)=>{o.addEventListener("click",()=>{s(i+1)})}),l.addEventListener("click",function(o){return I(this,null,function*(){try{let i=new FormData(e);window._hsq&&window._hsq.push(["trackEvent",{id:"form_submit_attempt"}]);let u=yield d(i);window._hsq&&(window._hsq.push(["trackFormSubmission",r,{formVariant:"A",formInstanceId:e.getAttribute("data-form-instance-id")||"1"}]),window._hsq.push(["trackEvent",{id:"form_submission_success"}]),window._hsq.push(["identify",{email:i.get("Email"),firstname:i.get("First-Name"),lastname:i.get("Last-Name")}]))}catch(i){console.error("HubSpot submission failed:",i);let u=document.querySelector(".w-form-fail");u&&(u.style.display="block"),window._hsq&&window._hsq.push(["trackEvent",{id:"form_submission_error",value:i.message}])}})})}else console.error("Formly submit button not found! Check if the button ID is correct.")});})();
//# sourceMappingURL=form.js.map
